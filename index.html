<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
</head>

<body>

  <script>
    /*// Define a model for linear regression.
  const model = tf.sequential();
  model.add(tf.layers.dense({units: 1, inputShape: [1]}));
  
  model.compile({loss: 'meanSquaredError', optimizer: 'sgd'});
  
  // Generate some synthetic data for training.
  const xs = tf.tensor2d([1, 2, 3, 4], [4, 1]);
  const ys = tf.tensor2d([1, 3, 5, 7], [4, 1]);
  
  // Train the model using the data.
  model.fit(xs, ys, {epochs: 10}).then(() => {
    // Use the model to do inference on a data point the model hasn't seen before:
    model.predict(tf.tensor2d([5], [1, 1])).print();
    // Open the browser devtools to see the output
  });*/

    function task0() {
      function createLotsOfTensors() {
        for (let i = 0; i < 1000; i++) {
          const a = tf.tensor1d([1, 2, 3]);
          const b = tf.scalar(i);
          a.mul(b).print();
        }
      }

      tf.tidy(createLotsOfTensors);
    }

    function task1() {

      const xs = tf.tensor1d([1, 2, 3]);
      const ys = xs.mul(tf.scalar(5));
      ys.print();

      const xs2 = tf.tensor([1, 2, 3]);
      const ys2 = xs2.mul(tf.scalar(5));
      ys2.print();

      const xs3 = tf.tensor2d([[1, 2, 3], [1, 2, 3]]);
      const ys3 = xs3.mul(tf.scalar(5));
      ys3.print();

      const ys4 = xs3.add(tf.scalar(3));
      ys4.print();
    }

    function task2() {
      function getYs(xs, m, c) {
        // To implement
        return (xs.mul(tf.scalar(m))).add(tf.scalar(c));
      }
      const t1 = tf.tensor1d([1, 5, 10]);
      const t2 = getYs(t1, 2, 1);
      t2.print();
    }

    function task3() {
      const t3 = tf.tensor1d([25, 76, 4, 23, -5, 22]);
      const max = t3.max(); // 76
      const min = t3.min(); // -5

      //const normalised = (original - minAsNumber) / (maxAsNumber - minAsNumber);

      const normalised = t3.sub(min).div((max.sub(min)));
      normalised.print();
    }

    function task4() {
      for (let i = 0; i < 100; i++) {
        tf.tensor1d([1, 2, 3]);
      }
      
      tf.dispose();
      
      tf.tidy(() => {
        for (let i = 0; i < 100; i++) {
          tf.tensor1d([4, 5, 6]);
        }
      });

      
      console.log(tf.memory());
    }

    tf.tidy(task4);

    document.write(tf.memory().numTensors);
  </script>

</body>

</html>